#
# Copyright (C) 2024 OmniROM Project
# SPDX-License-Identifier: Apache-2.0
#
# ASUS ROG Phone 7 (AI2205) Thermald Devices Configuration
# Advanced Gaming Thermal Management
# Android 15 Thermal HAL v2.0
#

# Thermal daemon configuration for ASUS ROG Phone 7
# Snapdragon 8 Gen 2 thermal management

[THERMAL_GOVERNOR_CONFIG]
# Thermal governor settings
DEFAULT_THERMAL_GOVERNOR=step_wise
EMERGENCY_THERMAL_GOVERNOR=step_wise

# Thermal zone binding configuration
BIND_CPU_THERMAL_ZONE=1
BIND_GPU_THERMAL_ZONE=1
BIND_BATTERY_THERMAL_ZONE=1
BIND_SKIN_THERMAL_ZONE=1

# Gaming mode thermal management
GAMING_MODE_THERMAL_LIMITS=1
GAMING_THERMAL_HEADROOM=5000

[CPU_THERMAL_DEVICES]
# CPU Cluster 0 (LITTLE - Cortex-A510)
CPU0_DEVICE=/sys/devices/system/cpu/cpufreq/policy0
CPU0_THERMAL_ZONE=/sys/class/thermal/thermal_zone0
CPU0_MAX_FREQUENCY=1804800
CPU0_MIN_FREQUENCY=300000
CPU0_THERMAL_THROTTLE_FREQS=1804800,1708800,1612800,1516800,1420800,1324800,1228800,1132800,1036800,940800,844800,748800,652800,556800,460800,300000
CPU0_CRITICAL_TEMP=110000
CPU0_PASSIVE_TEMP=95000
CPU0_ACTIVE_TEMP=85000

# CPU Cluster 1 (BIG - Cortex-X3 + A715)
CPU1_DEVICE=/sys/devices/system/cpu/cpufreq/policy4
CPU1_THERMAL_ZONE=/sys/class/thermal/thermal_zone1  
CPU1_MAX_FREQUENCY=3187200
CPU1_MIN_FREQUENCY=307200
CPU1_THERMAL_THROTTLE_FREQS=3187200,2995200,2803200,2611200,2419200,2227200,2035200,1843200,1651200,1459200,1267200,1075200,883200,691200,499200,307200
CPU1_CRITICAL_TEMP=115000
CPU1_PASSIVE_TEMP=100000
CPU1_ACTIVE_TEMP=90000

# CPU hotplug thermal management
CPU_HOTPLUG_ENABLE=1
CPU_HOTPLUG_TEMP_THRESHOLD=105000
CPU_HOTPLUG_TEMP_HYSTERESIS=5000

[GPU_THERMAL_DEVICES] 
# GPU (Adreno 740) thermal configuration
GPU_DEVICE=/sys/class/kgsl/kgsl-3d0
GPU_THERMAL_ZONE=/sys/class/thermal/thermal_zone2
GPU_MAX_FREQUENCY=719000000
GPU_MIN_FREQUENCY=133000000
GPU_THERMAL_THROTTLE_FREQS=719000000,680000000,615000000,550000000,475000000,410000000,355000000,315000000,270000000,220000000,180000000,140000000,133000000
GPU_CRITICAL_TEMP=120000
GPU_PASSIVE_TEMP=110000
GPU_ACTIVE_TEMP=95000

# GPU power management during thermal throttling
GPU_POWER_LEVEL_THROTTLE=1
GPU_BUS_THROTTLE_ENABLE=1
GPU_CRC_CHECK_DISABLE=0

[BATTERY_THERMAL_DEVICES]
# Battery thermal management
BATTERY_DEVICE=/sys/class/power_supply/battery
BATTERY_THERMAL_ZONE=/sys/class/thermal/thermal_zone3
BATTERY_CRITICAL_TEMP=60000
BATTERY_PASSIVE_TEMP=50000
BATTERY_ACTIVE_TEMP=45000
BATTERY_COOL_TEMP=42000

# Charging thermal mitigation
CHARGING_MITIGATION_DEVICE=/sys/devices/virtual/thermal/charging_mitigation
CHARGING_THROTTLE_TEMP=45000
CHARGING_SUSPEND_TEMP=50000
CHARGING_RESUME_TEMP=47000

# Fast charging thermal limits
FAST_CHARGING_THERMAL_LIMIT=40000
TURBO_CHARGING_THERMAL_LIMIT=35000

[SKIN_THERMAL_DEVICES]
# Skin temperature sensors for ROG Phone 7
QUIET_THERM_DEVICE=/sys/class/thermal/thermal_zone4
QUIET_THERM_CRITICAL_TEMP=50000
QUIET_THERM_PASSIVE_TEMP=45000
QUIET_THERM_ACTIVE_TEMP=40000

XO_THERM_DEVICE=/sys/class/thermal/thermal_zone5
XO_THERM_CRITICAL_TEMP=55000
XO_THERM_PASSIVE_TEMP=48000
XO_THERM_ACTIVE_TEMP=43000

# Skin temperature weighted average
SKIN_TEMP_WEIGHTED_AVG=1
QUIET_THERM_WEIGHT=0.6
XO_THERM_WEIGHT=0.4

[DISPLAY_THERMAL_DEVICES]
# AMOLED display thermal management
DISPLAY_DEVICE=/sys/class/leds/lcd-backlight
DISPLAY_THERMAL_ZONE=/sys/class/thermal/thermal_zone4
DISPLAY_MAX_BRIGHTNESS=4095
DISPLAY_MIN_BRIGHTNESS=164
DISPLAY_THERMAL_THROTTLE_BRIGHTNESS=4095,3686,3277,2868,2458,2049,1640,1231,819,410,164
DISPLAY_CRITICAL_TEMP=45000
DISPLAY_PASSIVE_TEMP=42000
DISPLAY_ACTIVE_TEMP=38000

# Refresh rate thermal throttling for gaming
DISPLAY_REFRESH_RATE_THROTTLE=1
DISPLAY_165HZ_THERMAL_LIMIT=35000
DISPLAY_144HZ_THERMAL_LIMIT=40000
DISPLAY_120HZ_THERMAL_LIMIT=43000
DISPLAY_90HZ_THERMAL_LIMIT=45000

[MODEM_THERMAL_DEVICES]
# 5G Modem thermal management
MODEM_DEVICE=/sys/devices/virtual/thermal/modem_mitigation
MODEM_THERMAL_ZONE=/sys/class/thermal/thermal_zone8
MODEM_CRITICAL_TEMP=100000
MODEM_PASSIVE_TEMP=90000
MODEM_ACTIVE_TEMP=80000

# PA thermal management
PA_THERM_DEVICE=/sys/class/thermal/thermal_zone7
PA_THERM_CRITICAL_TEMP=95000
PA_THERM_PASSIVE_TEMP=85000
PA_THERM_ACTIVE_TEMP=75000

[CAMERA_THERMAL_DEVICES]
# Camera thermal management
CAMERA_DEVICE=/sys/devices/virtual/thermal/camera_mitigation
CAMERA_THERMAL_ZONE=/sys/class/thermal/thermal_zone6
CAMERA_CRITICAL_TEMP=55000
CAMERA_PASSIVE_TEMP=48000
CAMERA_ACTIVE_TEMP=42000

# Camera recording thermal limits
CAMERA_4K_RECORDING_LIMIT=45000
CAMERA_8K_RECORDING_LIMIT=40000
CAMERA_BURST_MODE_LIMIT=48000

[ROG_GAMING_THERMAL]
# ASUS ROG Gaming specific thermal management
# AeroActive Cooler 7 integration
FAN_DEVICE=/sys/devices/virtual/thermal/fan_mitigation
FAN_ENABLE_TEMP=35000
FAN_MAX_SPEED_TEMP=45000
FAN_HYSTERESIS=3000

# ROG X-Mode thermal profile
X_MODE_THERMAL_PROFILE=1
X_MODE_CPU_TEMP_LIMIT=105000
X_MODE_GPU_TEMP_LIMIT=115000
X_MODE_SKIN_TEMP_LIMIT=46000

# Gaming mode thermal headroom
GAMING_MODE_TEMP_HEADROOM=3000
GAMING_MODE_PERFORMANCE_PRIORITY=1

# ROG Vision display thermal management
ROG_VISION_THERMAL_LIMIT=40000

[THERMAL_MITIGATION_ACTIONS]
# Progressive thermal mitigation actions
LEVEL_0_ACTIONS=none
LEVEL_1_ACTIONS=cpu_freq_throttle,gpu_freq_throttle
LEVEL_2_ACTIONS=cpu_freq_throttle,gpu_freq_throttle,display_brightness_throttle
LEVEL_3_ACTIONS=cpu_freq_throttle,gpu_freq_throttle,display_brightness_throttle,charging_throttle
LEVEL_4_ACTIONS=cpu_freq_throttle,gpu_freq_throttle,display_brightness_throttle,charging_throttle,camera_throttle
LEVEL_5_ACTIONS=cpu_freq_throttle,gpu_freq_throttle,display_brightness_throttle,charging_throttle,camera_throttle,modem_throttle
LEVEL_6_ACTIONS=emergency_shutdown

# Thermal mitigation hysteresis
MITIGATION_HYSTERESIS=3000
MITIGATION_CLEAR_HYSTERESIS=5000

[EMERGENCY_THERMAL_CONFIG]
# Emergency thermal shutdown
EMERGENCY_SHUTDOWN_ENABLE=1
EMERGENCY_SHUTDOWN_TEMP=70000
EMERGENCY_SHUTDOWN_SENSOR=quiet-therm-adc
EMERGENCY_SHUTDOWN_DELAY=10000

# Thermal runaway protection
THERMAL_RUNAWAY_PROTECTION=1
THERMAL_RUNAWAY_TEMP_DELTA=15000
THERMAL_RUNAWAY_TIME_WINDOW=30000

[LOGGING_CONFIG]
# Thermal logging configuration
THERMAL_LOG_ENABLE=1
THERMAL_LOG_LEVEL=3
THERMAL_LOG_PATH=/data/vendor/thermal
THERMAL_LOG_MAX_SIZE=10485760
THERMAL_LOG_MAX_FILES=5

# Performance monitoring
THERMAL_PERF_MONITORING=1
THERMAL_PERF_LOG_INTERVAL=60000